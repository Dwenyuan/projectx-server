<html><body><h1><font color=#8f8fbd>测试用例汇总</font></h1><table cellpadding="2" cellspacing="1" border="1" width="100%" align="center"><tr align="center" bgcolor="#e8d098"><th>任务</th><th>总数</th><th>成功数</th><th>失败数</th><th>最大在线数</th><th>HTTP请求总数</th><th>HTTP请求数/秒</th><th>总吞吐量(KB)</th><th>吞吐量/秒</th><th>总发送吞吐量(KB)</th><th>发送吞吐量/秒</th></tr><tr align="center" bgcolor="#E8FFE8"><td>test</td><td>20</td><td>15</td><td>5</td><td>7</td><td>936</td><td>13</td><td>208</td><td>3</td><td>0</td><td>0</td></tr></table><h1><font color=#8f8fbd>整个脚本会话时间(毫秒)</font></h1><table cellpadding="2" cellspacing="1" border="1" width="100%" align="center"><tr align="center" bgcolor="#e8d098"><th>任务</th><th>Max</th><th>Min</th><th>Ave</th><th>Std</th><th>参照值(由录制得到)</th></tr><tr align="center" bgcolor="#E8FFE8"><td>test</td><td>10027</td><td>7</td><td>2471.3333</td><td>3430.0679</td><td>638</td></tr></table><h1><font color=#8f8fbd>自定义事务汇总(毫秒)</font></h1><table cellpadding="2" cellspacing="1" border="1" width="100%" align="center"><tr align="center" bgcolor="#e8d098"><th>任务</th><th>Name</th><th>Max</th><th>Min</th><th>Ave</th><th>Std</th><th>参照值(由录制得到)</th><th>成功数</th><th>失败数</th></tr><tr align="center" bgcolor="#E8FFE8"><td>test</td><td>aa</td><td>4</td><td>1</td><td>3.5333333</td><td>0.9428691</td><td>283</td><td>15</td><td>5</td></tr></table><h1><font color=#8f8fbd>响应码汇总</font></h1><table cellpadding="2" cellspacing="1" border="1" width="100%" align="center"><tr align="center" bgcolor="#e8d098"><th>Name</th><th>总数</th></tr><tr align="center" bgcolor="#E8FFE8"><td>500</td><td>1</td></tr><tr align="center" bgcolor="#E8FFE8"><td>200</td><td>914</td></tr><tr align="center" bgcolor="#E8FFE8"><td>302</td><td>20</td></tr></table><h1><font color=#8f8fbd>服务器负载均衡汇总</font></h1><table cellpadding="2" cellspacing="1" border="1" width="100%" align="center"><tr align="center" bgcolor="#e8d098"><th>IP</th><th>总数</th></tr><tr align="center" bgcolor="#E8FFE8"><td>1.1.1.2</td><td>10</td></tr><tr align="center" bgcolor="#E8FFE8"><td>1.1.1.4</td><td>10</td></tr></table><br><h1>注意，执行并发测试时请关闭系统防火墙与杀毒软件，否则可能出现发送或接收数据被阻塞或拦截。</h1><h1 align="center" style="border-bottom: 1px solid;">以下测试结果分析</h1><h1><font color=#8f8fbd>虚拟用户运行失败</font></h1><h3 width=800px>请通过日志查看用户失败的原因，日志支持过滤、双击查看。您可以在analysis的曲线界面右键菜单过滤出超过一定值的记录，分析出现用户失败的时间点、个数。下面为对应的任务或执行器用户运行失败的情况：</h3><h3><font color=red>test：失败的总数为 5</font></h3><h1><font color=#8f8fbd>自定义事务运行失败</font></h1><h3 width=800px>请通过日志查看用户失败的原因，日志支持过滤、双击查看。您可以在analysis的曲线界面右键菜单过滤出超过一定值的记录，分析出现事务失败的时间点、个数。下面为对应的事务失败的情况：</h3><h3><font color=red>aa：失败的总数为 5</font></h3><h1><font color=#8f8fbd>自定义事务时间过长</font></h1><h3 width=800px>事务一般以页面或一个交易为单位，事务时间应当满足“2-5-8”原则，超过8秒将导致用户体验差。CPU高、吞吐量达到网卡极限、网络拥塞、系统I/O阻塞等因素都可能导致响应时间长。如果不是CPU与吞吐量原因，而是系统I/O阻塞原因可通过在工具栏启用“用户详情”功能，将用户的每个请求及事务的时间打印出来进行分析"，从而定位出哪些请求导致响应时间长。下面列举事务最大时间比录制的时间大2秒的情况，是否时间合理需要您自己根据自身业务分析：</h3><h3><font color=red>test：时间最大值为10027</font></h3><h1><font color=#8f8fbd>错误的响应码</font></h1><h3 width=800px>如果日志过多，可以通过响应码来过滤，然后双击查看原因，通过日志查看是否发送的请求消息存在问题，如果没问题，请检查服务器为什么返回错误码。<br>错误码出现原因是由于收到的值跟录制时的响应码不一样或在400-599之间，跟录制不一样很可能是关联参数问题。<br>错误的响应码包括：<font color=red>500</font></h3><h1><font color=#8f8fbd>TCP连接</font></h1><h3 width=800px>吞吐量达到网卡极限、CPU高、网络拥塞等因素都可能导致TCP建立时间长，TCP建立时间超过2.9秒表示很大可能存在SYN包丢失重传。请检查是服务器、网络、Agent执行器哪个导致的。</h3><h3><font color=red>TCP三次握手建立时间的最大值： 9462 毫秒</font></h3><h3><font color=red>TCP三次握手建立时间超过2.9秒的总数：3</font></h3><h1><font color=#8f8fbd>创建TCP连接失败</font></h1><h3 width=800px>1、如果是所有用户都有这个问题，一般是网络不通，或者服务器没启动，或者是对端的服务端口写错。<br><br>2、如果只是部分出现，则判断是否吞吐量达到网卡极限、CPU高、网络拥塞、TCP数限制、杀毒软件限制；如果不是CPU与吞吐量高，可能是服务器主动关闭，也可能是Agent执行器的系统、杀毒软件、防火墙限制或Agent没端口可用，这就需要定位是服务器问题还是Agent问题，可以使用wireshark抓包分析，抓包看TCP三次握手情况，使用日志打印的发送端口过滤，如果没有SYN，则表示是Agent执行器没发送出来，可能是Agent所在系统限制或无端口可用导致，如果无端口可用，会出现bind port的日志；如果发送了SYN，但服务器主动关闭，则定位服务是否TCP限制或者其他原因。<br><br>您可以在analysis的日志过滤<font color=red>connection failed</font>，分析出现失败的时间点，对比其他曲线指标对应时间点是否有异常。</h3><h3 width=800px>失败连接的日志包括了<font color=red>connect timed out</font>内容，超时主要原因是由于TCP三次握手建立超过一定时间，很大可能是连续发送3个SYN报文都没收到对端回复的SYN-ACK。时间一般大于9秒，您可以查看日志里打印的时间是否大于9秒。<br>可以使用wireshark抓包分析，抓包看TCP三次握手情况，如果是服务器对SYN不响应（解决：设置sysctl.conf里面tcp_timestamps=0）</h3><h1><font color=#8f8fbd>服务器主动关闭TCP</font></h1><h3 width=800px>出现发送请求后，在等待响应消息时，发现TCP连接被关闭，导致接收失败。可能是服务器主动关闭TCP，因为CPU过高或压力太大、线程池小、连接池小导致。请确认是否超过服务器最大承受力。<br>您可以在analysis的日志过滤<font color=red>server close tcp</font>，分析出现失败的时间点，对比其他曲线指标对应时间点是否有异常。</h3></body></html>